<!-- زر فتح الدردشة -->
<div id="chat-button">💬</div>

<!-- نافذة الدردشة -->
<div id="chat-widget">
  <div id="chat-header">مساعد عيادة وفاق وهبي</div>
  <div id="chat-messages"></div>
  <input id="chat-input" type="text" placeholder="اكتب رسالتك..." />
</div>

<style>
  #chat-button {
    position: fixed;
    bottom: 20px;
    right: 20px;
    background: #25d366;
    color: white;
    width: 60px;
    height: 60px;
    border-radius: 50%;
    display: flex;
    justify-content: center;
    align-items: center;
    font-size: 28px;
    cursor: pointer;
    box-shadow: 0px 4px 6px rgba(0,0,0,0.2);
    z-index: 1000;
  }

  #chat-widget {
    display: none;
    position: fixed;
    bottom: 90px;
    right: 20px;
    width: 300px;
    height: 400px;
    border: 1px solid #ccc;
    border-radius: 10px;
    background: white;
    box-shadow: 0px 4px 8px rgba(0,0,0,0.2);
    z-index: 1000;
    display: flex;
    flex-direction: column;
  }

  #chat-header {
    background: #25d366;
    color: white;
    padding: 10px;
    border-top-left-radius: 10px;
    border-top-right-radius: 10px;
    font-weight: bold;
  }

  #chat-messages {
    flex: 1;
    padding: 10px;
    overflow-y: auto;
    font-size: 14px;
  }

  .bot {
    background: #f1f1f1;
    padding: 6px;
    border-radius: 5px;
    margin: 5px 0;
  }

  .user {
    background: #dcf8c6;
    padding: 6px;
    border-radius: 5px;
    margin: 5px 0;
    text-align: left;
  }

  #chat-input {
    border: none;
    border-top: 1px solid #ddd;
    padding: 10px;
    width: 100%;
    font-size: 14px;
    outline: none;
  }
</style>

<script>
  const chatBtn = document.getElementById("chat-button");
  const chatWidget = document.getElementById("chat-widget");
  const chatMessages = document.getElementById("chat-messages");
  const chatInput = document.getElementById("chat-input");

  // فتح/غلق المحادثة
  chatBtn.onclick = () => {
    chatWidget.style.display = (chatWidget.style.display === "flex") ? "none" : "flex";
  };

  function addMessage(text, sender="bot") {
    const div = document.createElement("div");
    div.className = sender;
    div.textContent = text;
    chatMessages.appendChild(div);
    chatMessages.scrollTop = chatMessages.scrollHeight;
  }

  function botReply(userText) {
    let reply = "أنا مساعد عيادة وفاق وهبي 👩‍⚕️، اسألني عن: العنوان، الهاتف، المواعيد، الخدمات أو أوقات العمل.";
    if (userText.includes("عنوان")) reply = "📍 العنوان: 187 شارع حسين داي، العڨبة، تونس";
    else if (userText.includes("هاتف") || userText.includes("رقم")) reply = "📞 الهاتف: 20524822";
    else if (userText.includes("موعد") || userText.includes("حجز")) reply = "🗓️ لحجز موعد اتصل على: 20524822";
    else if (userText.includes("خدمات")) reply = "👩‍⚕️ الخدمات: تقييم وتشخيص اضطرابات النطق، جلسات علاجية، إعادة تأهيل النطق، علاج صعوبات التواصل.";
    else if (userText.includes("وقت") || userText.includes("دوام")) reply = "⏰ أوقات العمل: الإثنين – الجمعة (9ص–5م) | السبت (9ص–1ظ) | الأحد عطلة";

    setTimeout(() => addMessage(reply, "bot"), 500);
  }

  chatInput.addEventListener("keypress", function(e) {
    if (e.key === "Enter" && chatInput.value.trim()) {
      const userText = chatInput.value.trim();
      addMessage(userText, "user");
      chatInput.value = "";
      botReply(userText);
    }
  });

  // رسالة ترحيب أولية
  addMessage("مرحبًا 👋 كيف أقدر أساعدك؟ (عنوان / هاتف / موعد / خدمات / أوقات العمل)");
</script>
